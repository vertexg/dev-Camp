# eラーニングシステム AWS構成 ヒアリングアジェンダ

**案件名:** eラーニングシステム構築  
**ヒアリング日時:** _______________  
**参加者:** _______________  
**所要時間:** 約90分

---

## ヒアリングの目的

AWS上にeラーニングシステムを構築するにあたり、システム要件・性能要件・運用要件を明確化し、最適なAWSアーキテクチャを設計するための情報を収集します。

---

## アジェンダ

### 1. オープニング（5分）
- 自己紹介
- ヒアリングの目的と流れの説明
- 質問事項の概要説明

---

### 2. プロジェクト基本情報（10分）

#### 2.1 命名規則とプロジェクト識別
- [ ] プロジェクト名（英語）の確認
- [ ] 環境識別子の決定（prod/stg/dev）
- [ ] システム略称の決定

#### 2.2 アベイラビリティゾーン構成
- [ ] 使用するAZの数（2個 or 3個）
- [ ] 可用性要件の確認
- [ ] コストと冗長性のバランス

**確認ポイント:**
- 2AZ構成（推奨）: ap-northeast-1a + 1c
- 3AZ構成: 極めて高い可用性が必要な場合のみ

---

### 3. システム規模・性能要件（15分）

#### 3.1 ユーザー規模
- [ ] 同時接続ユーザー数（ピーク時）
- [ ] 登録ユーザー総数
- [ ] 利用時間帯の傾向

#### 3.2 コンテンツ要件
- [ ] 動画配信の有無
- [ ] 動画を配信する場合:
  - 1本あたりの容量
  - 総本数
  - 画質（HD/SD）
- [ ] 静的コンテンツ（画像・PDF等）の容量

#### 3.3 性能要件
- [ ] ページ表示速度の目標（例: 3秒以内）
- [ ] 動画再生の品質要件

**確認ポイント:**
- 同時接続数によってEC2インスタンスタイプが変わる
- 動画配信がある場合はCloudFrontの検討が必要

---

### 4. インフラ構成要件（20分）

#### 4.1 EC2インスタンス仕様
- [ ] 希望するインスタンスタイプ（または性能要件）
- [ ] OS（Amazon Linux 2023推奨）
- [ ] アプリケーション言語・フレームワーク
- [ ] Webサーバー（Nginx推奨）
- [ ] ストレージ容量

#### 4.2 Auto Scaling設定
- [ ] 最小インスタンス数（推奨: 2台）
- [ ] 最大インスタンス数
- [ ] スケールアウト閾値（推奨: CPU 70%）
- [ ] スケールイン閾値（推奨: CPU 30%）

#### 4.3 RDS Aurora MySQL構成
- [ ] インスタンスクラス（推奨: db.t3.small）
- [ ] エンジンバージョン（推奨: Aurora MySQL 3.x）
- [ ] 初期データ容量見込み
- [ ] バックアップ保持期間（推奨: 7日間）
- [ ] Read Replicaの数（推奨: 1台）
- [ ] メンテナンスウィンドウ（推奨: 火曜日 03:00-04:00 JST）
- [ ] データベース暗号化の要否
- [ ] データベースログの種類
  - 監査ログ（セキュリティ監査用）
  - スロークエリログ（パフォーマンス分析用）
  - 接続ログ（接続問題調査用）
  - 一般ログ（全クエリ記録、開発環境向け）

**確認ポイント:**
- Auroraは10GBから自動拡張（最大128TB）
- Read Replicaで読み取り負荷を分散
- 本番環境では監査ログ + スロークエリログのみでコスト抑制を推奨
- 全ログを有効化するとCloudWatchコストが月額 +¥3,000〜¥5,000 増加
- 一般ログは大量のデータを出力するため、開発環境のみ推奨

---

### 5. ストレージ・ログ管理（10分）

#### 5.1 S3利用
- [ ] 教材データの総容量見込み
- [ ] 月次増加量
- [ ] アクセス頻度（頻繁 or 低頻度）
- [ ] バージョニングの要否
- [ ] ライフサイクルポリシー

#### 5.2 ログ管理
- [ ] アプリケーションログ保持期間（推奨: 90日）
- [ ] ALBログ保持期間（推奨: 30日）
- [ ] CloudWatch Logs保持期間（推奨: 30日）

**確認ポイント:**
- 頻繁アクセス: S3 Standard
- 低頻度アクセス: S3 Intelligent-Tiering

---

### 6. ネットワーク・セキュリティ（15分）

#### 6.1 ネットワーク構成
- [ ] VPC CIDR（推奨: 10.0.0.0/16）
- [ ] Public Subnet CIDR
- [ ] Private Subnet (App) CIDR
- [ ] Private Subnet (DB) CIDR

#### 6.2 アクセス制御
- [ ] 管理画面のIP制限の要否
- [ ] 許可するIPアドレス範囲
- [ ] WAFの必要性

#### 6.3 EC2アクセス方法
- [ ] **主要アクセス方法:** Systems Manager (SSM)（推奨）
- [ ] **予備アクセス方法:** SSH公開鍵認証の設定要否
  - SSH接続元IP制限の要否
  - 許可するIPアドレス一覧
  - SSHポート番号（デフォルト22番 or 変更）

**確認ポイント:**
- SSMを主要アクセス方法として使用（踏み台サーバー不要）
- SSH接続を許可する場合は、セキュリティグループでIP制限を設定
- 公開鍵の管理（数、管理者名、ローテーション）は運用フェーズで対応
- インフラ構築時はSSH接続を許可するIP範囲とポート番号のみ設定
- WAFは本番環境で推奨（SQLインジェクション等対策）

---

### 7. 監視・アラート（10分）

#### 7.1 監視項目
- [ ] 監視対象（CPU、メモリ、ディスク、ネットワーク、RDS接続数）
- [ ] CPU使用率アラート閾値（推奨: 70% / 85%）
- [ ] メモリ使用率アラート閾値（推奨: 80% / 90%）
- [ ] RDS接続数アラート閾値
- [ ] カスタムメトリクスの要否
  - EC2のメモリ・ディスク使用率監視
  - CloudWatch Agent導入（追加コスト発生）

#### 7.2 通知設定
- [ ] アラート通知先（Email、Slack等）
- [ ] 通知先メールアドレス
- [ ] 通知の優先度設定

#### 7.3 ログ管理
- [ ] CloudWatch Logsの保持期間（推奨: 30日）
- [ ] アプリケーションログの取り込み範囲

**確認ポイント:**
- CloudWatchで統合監視
- SNS経由で複数の通知先に配信可能
- 標準メトリクス（CPU、ネットワーク等）は無料
- カスタムメトリクス（メモリ、ディスク）は有料（約¥450/月）
- ログ取り込みコスト: 約¥750/月（10GB想定）
- コスト重視の場合は標準メトリクスのみ使用を推奨

---

### 8. ドメイン・SSL証明書（5分）

#### 8.1 ドメイン設定
- [ ] 使用するドメイン名
- [ ] サブドメイン構成
- [ ] 既存ドメインの移管 or 新規取得
- [ ] TTL設定

#### 8.2 SSL/TLS証明書
- [ ] ワイルドカード証明書の要否
- [ ] 証明書検証方法（DNS検証推奨）

**確認ポイント:**
- ACMで無料のSSL証明書を発行可能
- DNS検証で自動更新が容易

---

### 9. バックアップ・災害対策（5分）

- [ ] RTO（目標復旧時間）
- [ ] RPO（目標復旧時点）
- [ ] AMIバックアップ頻度（推奨: 週次）
- [ ] AMI保持世代数（推奨: 4世代）

**確認ポイント:**
- マルチAZ構成で自動フェイルオーバー（数分）
- Aurora自動バックアップでRPO 5分以内

---

### 10. コスト管理（10分）

#### 10.1 予算
- [ ] 月額予算上限
- [ ] 初期構築費用
- [ ] コストアラート設定（推奨: 80%, 100%, 120%）
