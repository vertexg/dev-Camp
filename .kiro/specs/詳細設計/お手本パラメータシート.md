### パラメータ

- VPC

  | 項目         | 設定値             | 備考       |
  | ------------ | ------------------ | ---------- |
  | IPv4 CIDR    | 10.0.0.0/16        | IPv6無効化 |
  | 名前タグ     | basecamp-step1-vpc |            |
  | DNS ホスト名 | 有効               |            |

- InternetGateway

| 項目            | 設定値             | 備考 |
| --------------- | ------------------ | ---- |
| 名前タグ        | basecamp-step1-igw |      |
| アタッチするVPC | basecamp-step1-vpc |      |

- VPCサブネット タイプ1: Public Subnet

  - Availability Zone 1

    | 項目                     | 設定値                 | 備考 |
    | ------------------------ | ---------------------- | ---- |
    | サブネット名             | basecamp-step1-public1 |      |
    | アベイラビリティーゾーン | ap-northeast-1a        |      |
    | IPv4 CIDR ブロック       | 10.0.0.0/24            |      |

  - Availability Zone 2

    | 項目                     | 設定値                 | 備考 |
    | ------------------------ | ---------------------- | ---- |
    | サブネット名             | basecamp-step1-public2 |      |
    | アベイラビリティーゾーン | ap-northeast-1c        |      |
    | IPv4 CIDR ブロック       | 10.0.1.0/24            |      |

  - ルートテーブル

    | 項目 | 設定値                    | 備考 |
    | ---- | ------------------------- | ---- |
    | 名前 | basecamp-step1-public-rtb |      |
    | VPC  | basecamp-step1-vpc        |      |

  - ルーティング

    | 送信先      | ターゲット         | 備考 |
    | ----------- | ------------------ | ---- |
    | 0.0.0.0/0   | basecamp-step1-igw |      |
    | 10.0.0.0/16 | local              |      |

- VPCサブネット タイプ2: Private Subnet

  - Availability Zone 1

    | 項目                     | 設定値                  | 備考 |
    | ------------------------ | ----------------------- | ---- |
    | サブネット名             | basecamp-step1-private1 |      |
    | アベイラビリティーゾーン | ap-northeast-1a         |      |
    | IPv4 CIDR ブロック       | 10.0.10.0/24            |      |

  - Availability Zone 2

    | 項目                     | 設定値                  | 備考 |
    | ------------------------ | ----------------------- | ---- |
    | サブネット名             | basecamp-step1-private2 |      |
    | アベイラビリティーゾーン | ap-northeast-1c         |      |
    | IPv4 CIDR ブロック       | 10.0.11.0/24            |      |

  - ルートテーブル（ルート）

    | 送信先      | ターゲット | 備考 |
    | ----------- | ---------- | ---- |
    | 10.0.0.0/16 | local      |      |

- セキュリティグループ

  | セキュリティグループ名 | 用途                        | 備考                     |
  | ---------------------- | --------------------------- | ------------------------ |
  | basecamp-step1-alb-sg  | ALB用のセキュリティグループ | basecamp-step1-vpcで作成 |
  | basecamp-step1-ec2-sg  | EC2用のセキュリティグループ | basecamp-step1-vpcで作成 |
  | basecamp-step1-rds-sg  | RDS用のセキュリティグループ | basecamp-step1-vpcで作成 |

  - basecamp-step1-alb-sg

    - インバウンド

      | タイプ | プロトコル | ポート範囲 | 送信元 | 備考                                               |
      | ------ | ---------- | ---------- | ------ | -------------------------------------------------- |
      |        |            |            |        | 外部からのアクセス許可をしないので意図的に空欄です |

    - アウトバウンド

      | タイプ               | プロトコル | ポート範囲 | 送信先    | 備考 |
      | -------------------- | ---------- | ---------- | --------- | ---- |
      | すべてのトラフィック | すべて     | すべて     | 0.0.0.0/0 |      |

  - basecamp-step1-ec2-sg

    - インバウンド

      | タイプ | プロトコル | ポート範囲 | 送信元                | 備考 |
      | ------ | ---------- | ---------- | --------------------- | ---- |
      | HTTP   | TCP        | 80         | basecamp-step1-alb-sg |      |

    - アウトバウンド

      | タイプ               | プロトコル | ポート範囲 | 送信先    | 備考 |
      | -------------------- | ---------- | ---------- | --------- | ---- |
      | すべてのトラフィック | すべて     | すべて     | 0.0.0.0/0 |      |

  - basecamp-step1-rds-sg

    - インバウンド

      | タイプ | プロトコル | ポート範囲 | 送信元                | 備考 |
      | ------ | ---------- | ---------- | --------------------- | ---- |
      | TCP    | TCP        | 3306       | basecamp-step1-ec2-sg |      |

    - アウトバウンド

      | タイプ               | プロトコル | ポート範囲 | 送信先    | 備考 |
      | -------------------- | ---------- | ---------- | --------- | ---- |
      | すべてのトラフィック | すべて     | すべて     | 0.0.0.0/0 |      |

- IAMロール

  - EC2用

    | 項目         | 設定値                      | 備考                   |
    | ------------ | --------------------------- | ---------------------- |
    | IAM名        | basecamp-step1-ec2-iam-role |                        |
    | ユースケース | EC2                         | 実行を許可するサービス |

    - アタッチするマネージドポリシー

      | ポリシー名                   | 用途                                   | 備考 |
      | ---------------------------- | -------------------------------------- | ---- |
      | AmazonSSMManagedInstanceCore | EC2へSession managerでログインするため |      |
      |                              |                                        |      |

- EC2

  - EC2インスタンス1

    | 項目                         | 設定値                      | 備考                |
    | ---------------------------- | --------------------------- | ------------------- |
    | 名前                         | basecamp-step1-ec2-1        |                     |
    | AMI（OS）                    | Amazon Linux 2023           |                     |
    | インスタンスタイプ           | t3.micro                    | 無料プラン          |
    | セキュリティグループ         | basecamp-step1-ec2-sg       |                     |
    | サブネット                   | basecamp-step1-public1      |                     |
    | ストレージ（ボリューム）     | EBS                         | 詳細は下記EBSを参照 |
    | IAM ロール                   | basecamp-step1-ec2-iam-role |                     |
    | パブリック IP の自動割り当て | 有効化                      |                     |
    | キーペア                     | なし                        |                     |

    - EBS

      | 項目             | 設定値 | 備考 |
      | ---------------- | ------ | ---- |
      | ストレージタイプ | gp3    |      |
      | 容量             | 8GiB   |      |
      | 暗号化           | 有効化 |      |

  - EC2インスタンス2

    | 項目                         | 設定値                      | 備考                |
    | ---------------------------- | --------------------------- | ------------------- |
    | 名前                         | basecamp-step1-ec2-2        |                     |
    | AMI（OS）                    | Amazon Linux 2023           |                     |
    | インスタンスタイプ           | t3.micro                    | 無料プラン          |
    | セキュリティグループ         | basecamp-step1-ec2-sg       |                     |
    | サブネット                   | basecamp-step1-public2      |                     |
    | ストレージ（ボリューム）     | EBS                         | 詳細は下記EBSを参照 |
    | IAM ロール                   | basecamp-step1-ec2-iam-role |                     |
    | パブリック IP の自動割り当て | 有効化                      |                     |
    | キーペア                     | なし                        |                     |

    - EBS

      | 項目             | 設定値 | 備考 |
      | ---------------- | ------ | ---- |
      | ストレージタイプ | gp3    |      |
      | 容量             | 8GiB   |      |
      | 暗号化           | 有効化 |      |

- ALB

  - ロードバランサ

    | 項目                                 | 設定値                                         | 備考                             |
    | ------------------------------------ | ---------------------------------------------- | -------------------------------- |
    | ロードバランサ名                     | basecamp-step1-alb                             |                                  |
    | スキーム                             | Internet-facing                                |                                  |
    | IPアドレスタイプ                     | IPv4                                           |                                  |
    | サブネット（アベイラビリティゾーン） | basecamp-step1-public1, basecamp-step1-public2 | ap-northeast-1a, ap-northeast-1c |
    | セキュリティグループ                 | basecamp-step1-alb-sg                          |                                  |

  - ターゲットグループ

    | 項目                 | 設定値                                     | 備考 |
    | -------------------- | ------------------------------------------ | ---- |
    | ターゲットタイプ     | インスタンス                               |      |
    | ターゲットグループ名 | basecamp-step1-tg                          |      |
    | プロトコル           | HTTP                                       |      |
    | プロトコルバージョン | HTTP                                       |      |
    | ポート               | 80                                         |      |
    | 対象のインスタンス   | basecamp-step1-ec2-1, basecamp-step1-ec2-2 |      |

  - ヘルスチェック（デフォルトを使用）

    | 項目                  | 設定値       | 備考       |
    | --------------------- | ------------ | ---------- |
    | Health check protocol | HTTP         |            |
    | Health check path     | /            |            |
    | Port                  | Traffic port | 80番を使用 |
    | Healthy threshold     | 5            |            |
    | Unhealthy threshold   | 2            |            |
    | Timeout               | 5            |            |
    | Interval              | 30           |            |
    | Success codes         | 200          |            |

  - リスナー

    | 項目                 | 設定値  | 備考                 |
    | -------------------- | ------- | -------------------- |
    | プロトコル           | HTTP    |                      |
    | ポート               | 80      |                      |
    | デフォルトアクション | Forward | to basecamp-step1-tg |

- RDS

  - サブネットグループ

    | 項目                 | 設定値                                           | 備考 |
    | -------------------- | ------------------------------------------------ | ---- |
    | サブネットグループ名 | basecamp-step1-rds-subnet-group                  |      |
    | VPC                  | basecamp-step1-vpc                               |      |
    | サブネット           | basecamp-step1-private1, basecamp-step1-private2 |      |

  - DBインスタンス

    | 項目                         | 設定値                          | 備考                     |
    | ---------------------------- | ------------------------------- | ------------------------ |
    | エディション                 | MySQL Community                 |                          |
    | バージョン                   | MySQL 8以上                     |                          |
    | 可用性と耐久性               | 単一の DB インスタンス          |                          |
    | DB インスタンス識別子        | basecamp-step1-rds              |                          |
    | マスターユーザー名           | admin                           | 任意の設定をお願いします |
    | マスターパスワード           | Zaq12wsx                        | 任意の設定をお願いします |
    | インスタンスタイプ           | db.t3.micro                     |                          |
    | ストレージ                   | 20GiB                           | gp2                      |
    | ストレージの自動スケーリング | 無効                            |                          |
    | ネットワークタイプ           | IPv4                            |                          |
    | VPC                          | basecamp-step1-vpc              |                          |
    | サブネットグループ           | basecamp-step1-rds-subnet-group |                          |
    | パブリックアクセス           | なし                            |                          |
    | セキュリティグループ         | basecamp-step1-rds-sg           |                          |
    | データベースポート           | 3306                            |                          |
    | データベース認証             | パスワード認証                  |                          |
    | 自動バックアップ             | 無効                            |                          |
    | 拡張モニタリング             | 無効                            |                          |
    | 削除保護                     | 無効                            |                          |
    | ログのエクスポート           | なし                            |                          |
